<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Linme</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <!-- 경로 수정 -->
    <link rel="stylesheet" th:href="@{/assets/css/common.css}" />
    <link rel="stylesheet" th:href="@{/assets/css/header.css}" />
    <link rel="stylesheet" th:href="@{/assets/css/main.css}" />
    <link rel="stylesheet" th:href="@{/assets/css/footer.css}" />
  </head>

  <body>
    <div id="loading"></div>
    <!------------------------------->
    <!-- 오른쪽 하단 토글버튼 -->
    <!------------------------------->
    <div class="Topbutton">
      <a th:href="@{#}">
        <img th:src="@{/assets/img/main/topToggle.png}" />
      </a>
    </div>
    <!------------------------------->
    <!-- 로그인, 회원가입, 고객센터 전체영역 -->
    <!------------------------------->
    <!-- 로그인 정보가 없을때 -->
    <div class="headerBackground" th:if="${session.memberInfo == null}">
      <div class="headerContainer">
        <div class="headerBoxFirst">
          <ul>
            <li><a th:href="@{/login}">로그인 </a></li>
            <p style="color: #e6e6e6; padding-left: 5px">|</p>
            <li><a th:href="@{/signUp}">회원가입</a></li>
            <p style="color: #e6e6e6; padding-left: 5px">|</p>
            <li>
              <a th:href="@{#}" id="customerService2">고객센터 ▾</a>

              <!-- 고객센터 드롭다운영역⬇️ -->
              <div class="dropdownContent">
                <div class="topLayer" id="dropdownMenu2">
                  <a th:href="@{/login}">
                    <div class="item">공지사항</div>
                  </a>
                  <a th:href="@{/login}">
                    <div class="item">FAQ</div>
                  </a>
                  <a th:href="@{/login}">
                    <div class="item">1:1 문의</div>
                  </a>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <!------------------------------->
        <!-- header-main 영역 -->
        <!------------------------------->
        <div class="headerBoxSecond">
          <a th:href="@{/}">
            <img class="hearderLogo" th:src="@{/assets/img/header/logo_top.png}" alt="Logo" />
          </a>

          <!-- 검색영역 -->
          <!-- 사용자가 검색어를 입력하고 제출할 수 있는 폼 -->
          <form method="get" class="searchForm" th:action="@{/main/search}">
            <div class="searchContainer">
              <!-- 검색어를 입력할 수 있는 입력 필드 -->
              <input class="searchInput" type="search" name="keyword" placeholder="#비타민  #유산균" th:value="${keyword}" />

              <!-- 돋보기영역 -->
              <button type="submit" id="searchButton">
                <img class="search" th:src="@{/assets/img/header/search_pink.png}" alt="search" />
              </button>
            </div>
          </form>

          <!-- icon 영역  -->
          <div class="headerIcon">
            <a th:href="@{/login}"><img class="icon" th:src="@{/assets/img/header/car.png}" alt="iconCar" /></a>
            <a th:href="@{/login}"><img class="icon" th:src="@{/assets/img/header/cart.png}" alt="iconCart" /></a>
            <a th:href="@{/login}"><img class="icon" th:src="@{/assets/img/header/inform.png}" alt="iconInform" /></a>
          </div>
        </div>

        <!------------------------------->
        <!-- header-bottom 영역 -->
        <!------------------------------->
        <div class="headerBoxend">
          <!-- 카테고리 네이게이션바 -->
          <nav class="navbar">
            <div class="togglerContainer">
              <button class="navbar-toggler" type="button" id="categoryToggle">
                <img th:src="@{/assets/img/header/togglerIcon.png}" alt="togglerIcon" class="togglerIcon" />
                <span class="navbar-brand">카테고리</span>
              </button>
            </div>
          </nav>

          <!-- 카테고리 목록 영역 -->
          <ul class="list-group" id="categoryList">
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/3}">유산균</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/2}">비타민</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/1}">영양제</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/4}">오메가3</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/5}">다이어트/뷰티</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/6}">꿀/프로폴리스/로얄젤리</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/7}">기능별</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/8}">홍삼/인삼</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/9}">건강/과일즙</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/10}">환자식/영양보충식</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/11}">건강환/정</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/12}">건강분말</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/13}">한방재료</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/14}">대상별</a>
            </li>
          </ul>

          <!-- 신상품 베스트 특가상품 영역 -->
          <div class="headerItem">
            <ul class="navMenu">
              <li class="menuList">
                <a id="newListLink" class="deactivate" th:href="@{/header/new}">신상품</a>
              </li>
              <li class="menuList">
                <a id="bestListLink" class="deactivate" th:href="@{/header/best}">베스트</a>
              </li>
              <li class="menuList">
                <a id="specialListLink" class="deactivate" th:href="@{/header/spacial}">특가상품</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- 로그인 후 -->
    <div class="headerBackground" th:unless="${session.memberInfo == null}">
      <div class="headerContainer">
        <div class="headerBoxFirst">
          <ul>
            <li>
              <a th:href="@{#}" id="customerService1"><span th:text="${session.memberInfo.nickname}"></span>님 ▾</a>
              <!-- 회원 드롭다운영역⬇️ -->
              <div class="dropdownContent">
                <div class="topLayer" id="dropdownMenu1">
                  <a th:href="@{/myPage}">
                    <div class="item">마이페이지</div>
                  </a>
                  <a th:href="@{/myPage/myinfo}">
                    <div class="item">개인정보 수정</div>
                  </a>
                  <a th:href="@{/api/member/logout}" id="btn-logout">
                    <div class="item">로그아웃</div>
                  </a>
                </div>
              </div>
            </li>
            <p style="color: #e6e6e6; padding-left: 5px">|</p>
            <li>
              <a th:href="@{#}" id="customerService2">고객센터 ▾</a>

              <!-- 고객센터 드롭다운영역⬇️ -->
              <div class="dropdownContent">
                <div class="topLayer" id="dropdownMenu2">
                  <a th:href="@{/myPage/notice}">
                    <div class="item">공지사항</div>
                  </a>
                  <a th:href="@{/myPage/faq}">
                    <div class="item">FAQ</div>
                  </a>
                  <a th:href="@{/myPage/inquiry}">
                    <div class="item">1:1 문의</div>
                  </a>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <!------------------------------->
        <!-- header-main 영역 -->
        <!------------------------------->
        <div class="headerBoxSecond">
          <a th:href="@{/}">
            <img class="hearderLogo" th:src="@{/assets/img/header/logo_top.png}" alt="Logo" />
          </a>

          <!--  인풋 전체영역  -->
          <form method="get" class="searchForm" th:action="@{/main/search}">
            <div class="searchContainer">
              <input class="searchInput" type="search" name="keyword" placeholder="#비타민  #유산균" th:value="${keyword}" />

              <!-- 돋보기영역 -->
              <button type="submit" id="searchButton">
                <img class="search" th:src="@{/assets/img/header/search_pink.png}" alt="search" />
              </button>
            </div>
          </form>

          <!-- icon 영역  -->
          <div class="headerIcon">
            <a th:href="@{/mypage/shopping/order}"><img class="icon" th:src="@{/assets/img/header/car.png}" alt="iconCar" /></a>
            <a th:href="@{/cart}"><img class="icon" th:src="@{/assets/img/header/cart.png}" alt="iconCart" /></a>
            <a th:href="@{/myPage/myinfo/notification}"><img class="icon" th:src="@{/assets/img/header/inform.png}" alt="iconInform" /></a>
          </div>
        </div>

        <!------------------------------->
        <!-- header-bottom 영역 -->
        <!------------------------------->
        <div class="headerBoxend">
          <!-- 카테고리 네이게이션바 -->
          <nav class="navbar">
            <div class="togglerContainer">
              <button class="navbar-toggler" type="button" id="categoryToggle">
                <img th:src="@{/assets/img/header/togglerIcon.png}" alt="togglerIcon" class="togglerIcon" />
                <span class="navbar-brand">카테고리</span>
              </button>
            </div>
          </nav>

          <!-- 카테고리 목록 영역 -->
          <ul class="list-group" id="categoryList">
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/3}">유산균</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/2}">비타민</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/1}">영양제</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/4}">오메가3</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/5}">다이어트/뷰티</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/6}">꿀/프로폴리스/로얄젤리</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/7}">기능별</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/8}">홍삼/인삼</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/9}">건강/과일즙</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/10}">환자식/영양보충식</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/11}">건강환/정</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/12}">건강분말</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/13}">한방재료</a>
            </li>
            <li class="list-group-item">
              <a th:href="@{/header/categoryList/14}">대상별</a>
            </li>
          </ul>
          <!-- 신상품 베스트 특가상품 영역 -->
          <div class="headerItem">
            <ul class="navMenu">
              <li class="menuList">
                <a id="newListLink" class="deactivate" th:href="@{/header/new}">신상품</a>
              </li>
              <li class="menuList">
                <a id="bestListLink" class="deactivate" th:href="@{/header/best}">베스트</a>
              </li>
              <li class="menuList">
                <a id="specialListLink" class="deactivate" th:href="@{/header/spacial}">특가상품</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- 스크립트영역 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script th:src="@{/assets/js/header.js}"></script>
    <!-- <script th:src="@{/assets/js/main.js}"></script> -->
    <!-- <script th:src="@{/assets/js/main_all_list.js}"></script> -->
    <script th:src="@{/assets/js/helperJs/AxiosHelper.js}"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
      document.querySelector("#btn-logout").addEventListener("click", async (e) => {
        e.preventDefault();

        const data = await axiosHelper.get(e.currentTarget.getAttribute("href"));

        if (data) {
          // 로그아웃시 메인페이지로 이동
          window.location.href = "[[@{/}]]";
        }
      });
    </script>
  </body>
</html>
